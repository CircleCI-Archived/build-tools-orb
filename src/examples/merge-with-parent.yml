description: >
  Merge with a defined or detected parent branch to run tests against likely 
  result.

usage:
  version: 2.1

  orbs:
    build-tools: circleci/build-tools@x.y.z

  jobs:
    test-with-merge:
      docker:
        - image: cimg/base:stable
      steps:
        - checkout
        - build-tools/merge-with-parent
        - ./your-test-script

  workflows:
    your-workflow:
      jobs:
        - test-with-merge
